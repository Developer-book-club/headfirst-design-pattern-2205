# 1. ì»´í¬ì§€íŠ¸ íŒ¨í„´ ê°„ë³´ê¸°
> ì°¸ê³ í•œ ìë£Œ : https://refactoring.guru/design-patterns/composite

## 1.1. ì§ê´€ì ìœ¼ë¡œ ì´í•´í•´ë³´ê¸°
![image](https://user-images.githubusercontent.com/75282888/172877516-465a123f-7629-40a7-bb21-884915230057.png)


- íŠ¸ë¦¬ êµ¬ì¡°ë¥¼ í‘œí˜„í•˜ëŠ” íŒ¨í„´ì…ë‹ˆë‹¤.
- ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ ì½”ì–´ ëª¨ë¸ì´ íŠ¸ë¦¬ í˜•íƒœë¡œ í‘œí˜„ë˜ëŠ” ê²½ìš°, ìš°ë¦¬ëŠ” ì»´í¬ì§€íŠ¸ íŒ¨í„´ì˜ ì‚¬ìš©ì„ ê³ ë ¤í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- ì˜ˆë¥¼ ë“¤ì–´, ë‘ê°€ì§€ íƒ€ì…ì˜ í´ë˜ìŠ¤ë¥¼ ìƒìƒí•´ë³¼ê¹Œìš”? `Products`ì™€ `Box`ê°€ ìˆë‹¤ê³  ìƒê°í•´ë´…ì‹œë‹¤.

- `Box`ì—ëŠ” ë‹¤ì–‘í•œ í˜•íƒœì˜ `Product`ë¥¼ ë‹´ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ë¬¼ë¡  ìê¸° ìì‹ ë³´ë‹¤ ì‘ì€ `Box` ì—­ì‹œ ë‹´ì„ ìˆ˜ ìˆê² ì§€ìš”. 

- ë”°ë¼ì„œ ë‹¤ìŒê³¼ ê°™ì€ í˜•íƒœë¡œ ì‹œê°ì ìœ¼ë¡œ í‘œí˜„í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

  

  



## 1.2. ì½”ë“œë¡œ ì´í•´í•´ë³´ê¸°(1)

```ts
public abstract class FileSystemComponent {
    public String name;

    public void add(FileSystemComponent child) {
        throw new UnsupportedOperationException();
    }

    public void remove(FileSystemComponent child) {
        throw new UnsupportedOperationException();
    }

    public FileSystemComponent getChild(int i) {
        throw new UnsupportedOperationException();
    }

    abstract void operation();
}
```





```java
import java.util.ArrayList;

public class Directory extends FileSystemComponent {
    ArrayList<FileSystemComponent> children = new ArrayList<FileSystemComponent>();

    Directory(String name) {
        this.name = name;
    }

    public void add(FileSystemComponent child) {
        children.add(child);
    }

    public void remove(FileSystemComponent child) {
        children.remove(child);
    }

    public FileSystemComponent getChild(int i) {
        return (FileSystemComponent) children.get(i);
    }

    public void operation() {
        System.out.println("this directory is " + name);
        System.out.println("children are as follows {");
        for (int i = 0; i < children.size(); i++) {
            FileSystemComponent child = (FileSystemComponent) children.get(i);
            child.operation();
        }
        System.out.println("}");
    }
}
```



```java
public class File extends FileSystemComponent {
    File(String name) {
        this.name = name;
    }

    public void operation() {
        System.out.println("this File is " + name);
    }
}
```



```java
public class Main {

    public static void main(String[] args) {
        Directory rootDir = new Directory("root");

        rootDir.add(new File("README.md"));

        Directory folder1 = new Directory("folder1");
        folder1.add(new File("maru.jpg"));

        rootDir.add(folder1);

        Directory folder2 = new Directory("folder2");
        Directory folder3 = new Directory("folder3");
        folder2.add(folder3);
        folder3.add(new File("hello, world.java"));

        rootDir.add(folder2);

        rootDir.operation();
    }
}

```









## 1.3. ì½”ë“œë¡œ ì´í•´í•´ë³´ê¸°(2)

```ts
abstract class Component {
    protected parent: Component;
    public setParent(parent: Component) {
        this.parent = parent;
    }
    public getParent(): Component {
        return this.parent;
    }
    public add(component: Component): void { }

    public remove(component: Component): void { }
    
    public isComposite(): boolean {
        return false;
    }
    
    public abstract operation(): string;
}


class Product extends Component {
    public operation(): string {
        return 'ğŸ';
    }
}


class Box extends Component {
    protected children: Component[] = [];

    public add(component: Component): void {
        this.children.push(component);
        component.setParent(this);
    }

    public remove(component: Component): void {
        const componentIndex = this.children.indexOf(component);
        this.children.splice(componentIndex, 1);

        component.setParent(null);
    }

    public isComposite(): boolean {
        return true;
    }

    public operation(): string {
        const results = [];
        for (const child of this.children) {
            results.push(child.operation());
        }

        return `Branch(${results.join('+')})`;
    }
}
```

