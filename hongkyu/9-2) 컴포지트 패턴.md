









# 1. 컴포지트 패턴 간보기
> 참고한 자료 : https://refactoring.guru/design-patterns/composite

## 1.1. 직관적으로 이해해보기
![image](https://user-images.githubusercontent.com/75282888/172877516-465a123f-7629-40a7-bb21-884915230057.png)


- 트리 구조를 표현하는 패턴입니다.
- 어플리케이션의 코어 모델이 트리 형태로 표현되는 경우, 우리는 컴포지트 패턴의 사용을 고려해볼 수 있습니다.

- 예를 들어, 두가지 타입의 클래스를 상상해볼까요? `Products`와 `Box`가 있다고 생각해봅시다.

- `Box`에는 다양한 형태의 `Product`를 담을 수 있습니다. 그리고 물론 자기 자신보다 작은 `Box` 역시 담을 수 있겠지요. 

- 따라서 다음과 같은 형태로 시각적으로 표현해볼 수 있습니다.

  

  



## 1.2. 코드로 이해해보기

```ts
abstract class Component {
    protected parent: Component;
    public setParent(parent: Component) {
        this.parent = parent;
    }
    public getParent(): Component {
        return this.parent;
    }
    public add(component: Component): void { }

    public remove(component: Component): void { }
    
    public isComposite(): boolean {
        return false;
    }
    
    public abstract operation(): string;
}


class Product extends Component {
    public operation(): string {
        return '🎁';
    }
}


class Box extends Component {
    protected children: Component[] = [];

    public add(component: Component): void {
        this.children.push(component);
        component.setParent(this);
    }

    public remove(component: Component): void {
        const componentIndex = this.children.indexOf(component);
        this.children.splice(componentIndex, 1);

        component.setParent(null);
    }

    public isComposite(): boolean {
        return true;
    }

    public operation(): string {
        const results = [];
        for (const child of this.children) {
            results.push(child.operation());
        }

        return `Branch(${results.join('+')})`;
    }
}
```











