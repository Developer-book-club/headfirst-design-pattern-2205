# 1. ì»´í¬ì§€íŠ¸ íŒ¨í„´ ê°„ë³´ê¸°


## 1.1. ì§ê´€ì ìœ¼ë¡œ ì´í•´í•´ë³´ê¸°
![image](https://user-images.githubusercontent.com/75282888/172877516-465a123f-7629-40a7-bb21-884915230057.png)
ì´ë¯¸ì§€ ì¶œì²˜ : https://refactoring.guru/design-patterns/composite

- ì»´í¬ì§€íŠ¸ íŒ¨í„´ì€ ê¸°ë³¸ì ìœ¼ë¡œ íŠ¸ë¦¬ êµ¬ì¡°ë¥¼ í‘œí˜„í•˜ëŠ” íŒ¨í„´ì…ë‹ˆë‹¤.
- ì˜ˆë¥¼ ë“¤ì–´, `Products`ì™€ `Box`ê°€ ìˆë‹¤ê³  ìƒê°í•´ë´…ì‹œë‹¤.
- `Box`ì—ëŠ” ë‹¤ì–‘í•œ í˜•íƒœì˜ `Product`ë¥¼ ë‹´ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ë¬¼ë¡  ìê¸° ìì‹ ë³´ë‹¤ ì‘ì€ `Box` ì—­ì‹œ ë‹´ì„ ìˆ˜ ìˆê² ì§€ìš”. 
- ì¼ë°˜ì ìœ¼ë¡œ `Box`ì˜ ì—­í• ì„ í•˜ëŠ” í´ë˜ìŠ¤ë¥¼ `Node`, `Product`ì˜ ì—­í• ì„ í•˜ëŠ” í´ë˜ìŠ¤ë¥¼ `Leaf`ë¼ê³  í•©ë‹ˆë‹¤.



## 1.2. ì½”ë“œë¡œ ì´í•´í•´ë³´ê¸°
```java
public abstract class Component {
    private String name;

    Component(String name) {
        this.name = name;
    }

    public void add(Component component) {
        throw new UnsupportedOperationException();
    }

    public void remove(Component component) {
        throw new UnsupportedOperationException();
    }

    public Component getChild(int i) {
        throw new UnsupportedOperationException();
    }

    public String getName() {
        return name;
    }

}

```
- êµ¬í˜„í•˜ëŠ” ë°©ì‹ì€ ìë£Œë“¤ë§ˆë‹¤ ì¡°ê¸ˆì”© ë‹¤ë¥¸ ê²ƒ ê°™ìŠµë‹ˆë‹¤.
- ë³¸ì§ˆì ìœ¼ë¡œ ìš°ë¦¬ê°€ êµ¬í˜„í•˜ê³ ì í•˜ëŠ” ê²ƒì€ Tree í˜•íƒœì˜ êµ¬ì¡°ì„ìœ¼ë¡œ, `child`ë¥¼ ì¶”ê°€í•˜ê³ , ì‚­ì œí•˜ê³ , ì¡°íšŒí•  ìˆ˜ ìˆìœ¼ë©´ ë©ë‹ˆë‹¤.


```java
import java.util.ArrayList;
import java.util.Iterator;

public class Node extends Component {
    private ArrayList<Component> children = new ArrayList<Component>();

    Node(String name) {
        super(name);
    }

    public void add(Component component) {
        children.add(component);
    }

    public void remove(Component component) {
        throw new children.remove(component);
    }

    public Component getChild(int i) {
        return children.get(i);
    }

    public int len() {
        return children.size();
    }

    public Iterator<Component> createDFSIterator() {
        return new DFSIterator(this);
    }

    public Iterator<Component> createBFSIterator() {
        return new BFSIterator(this);
    }
}
```

- `createDFSIterator`ì™€ `createBFSIterator`ë¼ëŠ” ë©”ì„œë“œê°€ ëˆˆì— ë“¤ì–´ì˜¤ì‹œë‚˜ìš”?
- í•´ë‹¹ ë©”ì„œë“œë“¤ì€ ìš°ë¦¬ê°€ ì •ì˜í•œ `Node`ë¥¼ ìˆœíšŒí•˜ëŠ” `Iterator` í´ë˜ìŠ¤ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
- ì»´í¬ì§€íŠ¸ íŒ¨í„´(íŠ¸ë¦¬) ì—­ì‹œ ëŒ€í‘œì ì¸ ì´í„°ëŸ¬ë¸”í•œ íŒ¨í„´ì…ë‹ˆë‹¤.
- ë”°ë¼ì„œ íŠ¸ë¦¬ êµ¬ì¡°í•˜ë©´ ë– ì˜¤ë¥´ëŠ” ëŒ€í‘œì ì¸ ìˆœíšŒ ì•Œê³ ë¦¬ì¦˜ì¸ `BFS`ì™€ `DFS`ë¥¼ êµ¬í˜„í•´ë³´ì•˜ìŠµë‹ˆë‹¤.

```java
public class Leaf extends Component {
    Leaf(String name) {
        super(name);
    }
}
```
- `Leaf`ëŠ” ê·¸ëƒ¥ ê°„ë‹¨í•˜ê²Œ `name` ë©¤ë²„  êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.


## 1.3. Iterator íŒ¨í„´ ì ìš©í•´ë³´ê¸°

```java
import java.util.Iterator;
import java.util.Stack;

public class DFSIterator implements Iterator<Component> {
    public Stack<Component> components = new Stack<Component>();

    DFSIterator(Node node) {
        for (int i = 0; i < node.len(); i++) {
            Component c = node.getChild(i);
            components.push(c);
        }
    }

    public Component next() {
        if (!hasNext()) {
            throw new Error("Index out of bound ğŸ’©");
        }
        Component component = components.pop();
        if (component instanceof Node) {
            Node node = (Node) component;
            for (int i = 0; i < node.len(); i++) {
                Component newComponent = node.getChild(i);
                components.add(newComponent);
            }
        }

        return component;
    }

    public boolean hasNext() {
        return !components.isEmpty();
    }
}
```


```java
import java.util.ArrayDeque;
import java.util.Iterator;
import java.util.Queue;

public class BFSIterator implements Iterator<Component> {
    public Queue<Component> components = new ArrayDeque<Component>();

    BFSIterator(Node node) {
        for (int i = 0; i < node.len(); i++) {
            Component c = node.getChild(i);
            components.add(c);
        }
    }

    public Component next() {
        if (!hasNext()) {
            throw new Error("Index out of bound ğŸ’©");
        }
        Component component = components.remove();
        if (component instanceof Node) {
            Node node = (Node) component;
            for (int i = 0; i < node.len(); i++) {
                Component newComponent = node.getChild(i);
                components.add(newComponent);
            }
        }

        return component;
    }

    public boolean hasNext() {
        return !components.isEmpty();
    }
}
```

![image](https://user-images.githubusercontent.com/75282888/173207721-264a7775-550b-4cc3-9b2b-89fd27e09cbd.png)

- ìœ„ì™€ ê°™ì€ íŠ¸ë¦¬ êµ¬ì¡°ë¥¼ ì»´í¬ì§€íŠ¸ íŒ¨í„´ì„ ì´ìš©í•´ì„œ í‘œí˜„í•˜ê³ , ì´í„°ë ˆì´í„° íŒ¨í„´ì„ í™œìš©í•´ì„œ ìˆœíšŒí•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.


```java
import java.util.Iterator;

public class Main {

    public static Node createTree() {
        Node root = new Node("root");
        Component node_1 = new Node("1");
        Component node_2 = new Node("2");
        Component leaf_3 = new Leaf("3");
        Component leaf_4 = new Leaf("4");
        Component leaf_5 = new Leaf("5");
        Component leaf_6 = new Leaf("6");
        Component leaf_7 = new Leaf("7");
        Component node_8 = new Node("8");
        Component leaf_9 = new Leaf("9");

        Component leaf_10 = new Leaf("10");
        root.add(leaf_5);
        root.add(node_1);
        node_1.add(leaf_3);
        node_1.add(leaf_4);
        node_1.add(node_2);
        root.add(node_8);

        node_2.add(leaf_6);
        node_2.add(leaf_7);
        node_8.add(leaf_9);
        node_8.add(leaf_10);

        return root;
    }

    public static void main(String[] args) {

        Node tree = createTree();
        System.out.println("BFS");

        Iterator<Component> bfs = tree.createBFSIterator();
        System.out.println(bfs.next().getName()); // 5
        System.out.println(bfs.next().getName()); // 1
        System.out.println(bfs.next().getName()); // 8
        System.out.println(bfs.next().getName()); // 3
        System.out.println(bfs.next().getName()); // 4
        System.out.println(bfs.next().getName()); // 2
        System.out.println(bfs.next().getName()); // 9
        System.out.println(bfs.next().getName()); // 10
        System.out.println(bfs.next().getName()); // 6
        System.out.println(bfs.next().getName()); // 7
        System.out.println("=-".repeat(50));
        System.out.println("DFS");
        Iterator<Component> dfs = tree.createDFSIterator();

        System.out.println(dfs.next().getName()); // 8
        System.out.println(dfs.next().getName()); // 10
        System.out.println(dfs.next().getName()); // 9
        System.out.println(dfs.next().getName()); // 1
        System.out.println(dfs.next().getName()); // 2
        System.out.println(dfs.next().getName()); // 7
        System.out.println(dfs.next().getName()); // 6
        System.out.println(dfs.next().getName()); // 4
        System.out.println(dfs.next().getName()); // 3
        System.out.println(dfs.next().getName()); // 5
        System.out.println(dfs.next().getName()); // Index out of bound ğŸ’©

    }
}








