





## ê°œë…



> The Command Pattern encapsulates a request as an object, thereby letting you parameterize other objects with different requests, queue or log requests, and support undoable operation.



- ì»¤ë§¨ë“œ íŒ¨í„´ì˜ í•µì‹¬ ì² í•™ì€ <mark>ê¸°ëŠ¥ì ì¸ ë¶€ë¶„ì„ ë¶„ë¦¬í•´ ìº¡ìŠí™”í•˜ëŠ” ê²ƒ</mark>ì…ë‹ˆë‹¤.
  - ë‹¤ë¥´ê²Œ ì„¤ëª…í•˜ë©´ ì–´ë– í•œ í´ë˜ìŠ¤ ì•ˆì˜ íŠ¹ì •í•œ ë©”ì„œë“œ í˜¸ì¶œì„ ë”°ë¡œ ë¶„ë¦¬í•´ì„œ, ë³„ë„ì˜ í´ë˜ìŠ¤ë¡œ ìº¡ìŠí™”í•˜ëŠ” ê²ƒìœ¼ë¡œ ì´í•´í•´ë„ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.
  - The Command pattern can turn a specific method call into a stand-alone object. 

- ì˜ˆë¥¼ ë“¤ì–´ ë¬´ì–¸ê°€ë¥¼ ì €ì¥í•  ë•Œ, ìš°ë¦¬ëŠ” <sup>1)</sup><u>ë„êµ¬ëª¨ìŒì˜ ğŸ’¾ ì•„ì´ì½˜ì„ í´ë¦­</u>í•  ìˆ˜ë„ ìˆê³ , <sup>2)</sup><u>íŒŒì¼ ë©”ë‰´ì—ì„œ ì €ì¥í•˜ê¸°ë¥¼ í´ë¦­</u>í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì•„ë‹ˆë©´ <sup>3)</sup><u><kbd>ctrl</kbd> + <kbd>s</kbd> ë¼ëŠ” ë‹¨ì¶•í‚¤</u>ë¥¼ ëˆ„ë¥¼ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
- UIëŠ” ë‹¤ë¥´ì§€ë§Œ ì²˜ë¦¬ë˜ëŠ” ê¸°ëŠ¥ì€ ê²°êµ­ "ì €ì¥í•˜ê¸°"ë¡œ ë™ì¼í•©ë‹ˆë‹¤. 
- ìœ„ì˜ 3ê°€ì§€ UIë¥¼ ê°ê° í´ë˜ìŠ¤ë¡œ í‘œí˜„í•œë‹¤ê³  í•˜ë©´, ì €ì¥ê³¼ ê´€ë ¨ëœ ë¡œì§ì´ ë™ì¼í•˜ê²Œ ë°˜ë³µëœë‹¤ëŠ” ì´ì•¼ê¸°ì…ë‹ˆë‹¤. 
- ë”°ë¼ì„œ ì €ì¥ê³¼ ê´€ë ¨ëœ (í˜¹ì€ ê¸°ëŠ¥ê³¼ ê´€ë ¨ëœ) ë¶€ë¶„ë§Œ ìº¡ìŠí™”í•´ì„œ ë³„ë„ì˜ í´ë˜ìŠ¤ë¥¼ êµ¬ì„±í•œë‹¤ë©´, í›¨ì”¬ ê°„ê²°í•˜ê³  ìˆ˜ì •ê³¼ í™•ì¥ì´ ìš©ì´í•œ ì½”ë“œë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.



![image](https://user-images.githubusercontent.com/75282888/170826759-157e75f5-a8ba-48f0-afa6-3f5a09b06c9a.png)

- `Invoker` í´ë˜ìŠ¤ëŠ” ì–´ë– í•œ `Command` í´ë˜ìŠ¤ì˜ `execute()` í˜¹ì€ `undo()`ë¥¼ ë°œìƒì‹œí‚¤ëŠ” í´ë˜ìŠ¤ì…ë‹ˆë‹¤. ì•ì„œ ì˜ˆì‹œë¡œ ë“¤ì—ˆë˜ UIì—ì„œ "ğŸ’¾" ì•„ì´ì½˜ì´ë‚˜ "ì €ì¥í•˜ê¸°" ë²„íŠ¼, "<kbd>ctrl</kbd> + <kbd>s</kbd>"ì´ ì´ì— í•´ë‹¹ë©ë‹ˆë‹¤. 
- `Command` ì¸í„°í˜ì´ìŠ¤ëŠ” `execute`ì™€ `undo`ë¼ëŠ” ì¶”ìƒë©”ì„œë“œë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. `Invoker`ì— ì˜í•´ `execute` í˜¹ì€ `undo` ë©”ì„œë“œê°€ í˜¸ì¶œë˜ë©°, `execute`ì™€ `undo` ë©”ì„œë“œëŠ” `Receiver` í´ë˜ìŠ¤ì— ëŒ€í•œ ë¡œì§ì„ ë‹´ê²Œ ë©ë‹ˆë‹¤.
- `Receiver`ëŠ” `Command` í´ë˜ìŠ¤ì˜ ëŒ€ìƒì´ ë˜ëŠ” í´ë˜ìŠ¤ì…ë‹ˆë‹¤. `Command` ëŠ” `Receiver`ë¥¼ ì¡°ì‘í•œë‹¤ê³  ì´í•´í•´ë„ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.







## ì˜ˆì‹œ

### Command

```java
public interface Command {
	public void execute();

	public void undo();
}
```

```java
public class LightOnCommand implements Command {
	Light light;

	public LightOnCommand(Light light) {
		this.light = light;
	}

	public void execute() {
		light.on();
	}

	public void undo() {
		light.off();
	}
}

```

- `LightOnCommand` í´ë˜ìŠ¤ì—ì„œ `light`ëŠ” **Receiver**ì— í•´ë‹¹í•©ë‹ˆë‹¤. ë‹¬ë¦¬ ë§í•˜ë©´ `light`ëŠ”  `LightOnCommand` ê°ì²´ì˜ ëª…ë ¹ì„ ë°›ëŠ” ëŒ€ìƒìœ¼ë¡œ ì´í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.


```java

public class LightOffCommand implements Command {
	Light light;

	public LightOffCommand(Light light) {
		this.light = light;
	}

	public void execute() {
		light.off();
	}

	public void undo() {
		light.on();
	}
}

```

```java
public class NoCommand implements Command {
	public void execute() { }
	public void undo() { }
}
```



### Invoker

![image](https://user-images.githubusercontent.com/75282888/170826770-2f551b42-645f-4b16-af78-46ee0cc155d7.png)

```java
public class RemoteControlWithUndo {
	Command[] onCommands;
	Command[] offCommands;
	Command undoCommand;

	public RemoteControlWithUndo() {
		onCommands = new Command[7];
		offCommands = new Command[7];

		Command noCommand = new NoCommand();
		for (int i = 0; i < 7; i++) {
			onCommands[i] = noCommand;
			offCommands[i] = noCommand;
		}
		undoCommand = noCommand;
	}

	public void setCommand(int slot, Command onCommand, Command offCommand) {
		onCommands[slot] = onCommand;
		offCommands[slot] = offCommand;
	}

	public void onButtonWasPushed(int slot) {
		onCommands[slot].execute();
		undoCommand = onCommands[slot];
	}

	public void offButtonWasPushed(int slot) {
		offCommands[slot].execute();
		undoCommand = offCommands[slot];
	}

	public void undoButtonWasPushed() {
		undoCommand.undo();
	}

	public String toString() {
		StringBuffer stringBuff = new StringBuffer();
		stringBuff.append("\n------ Remote Control -------\n");
		for (int i = 0; i < onCommands.length; i++) {
			stringBuff.append("[slot " + i + "] " + onCommands[i].getClass().getName()
					+ "    " + offCommands[i].getClass().getName() + "\n");
		}
		stringBuff.append("[undo] " + undoCommand.getClass().getName() + "\n");
		return stringBuff.toString();
	}
}

```

- `RemoteControlWithUndo`ëŠ” **Invoker**ì…ë‹ˆë‹¤.
- `RemoteControlWithUndo`ëŠ” `Command`ë“¤ì„ ê°€ì§€ë©°, ê°–ê³  ìˆëŠ” `Command`ë“¤ì„ `execute()` í˜¹ì€ `undo()` í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.



### Receiver

```java
public class Light {
	String location;
	int level;

	public Light(String location) {
		this.location = location;
	}

	public void on() {
		level = 100;
		System.out.println("Light is on");
	}

	public void off() {
		level = 0;
		System.out.println("Light is off");
	}

}

```

- `Light`ëŠ” **Receiver**ì…ë‹ˆë‹¤. `Command`ì— ì˜í•´ ì¡°ì‘ë˜ëŠ” í´ë˜ìŠ¤ì…ë‹ˆë‹¤.







### Client Code

```java
public class RemoteLoader {
	public static void main(String[] args) {
		RemoteControlWithUndo remoteControl = new RemoteControlWithUndo();

		Light livingRoomLight = new Light("Living Room");

		LightOnCommand livingRoomLightOn = new LightOnCommand(livingRoomLight);
		LightOffCommand livingRoomLightOff = new LightOffCommand(livingRoomLight);

		remoteControl.setCommand(0, livingRoomLightOn, livingRoomLightOff);

		remoteControl.onButtonWasPushed(0);
		remoteControl.offButtonWasPushed(0);
		System.out.println(remoteControl);
		remoteControl.undoButtonWasPushed();
		remoteControl.offButtonWasPushed(0);
		remoteControl.onButtonWasPushed(0);
		System.out.println(remoteControl);
		remoteControl.undoButtonWasPushed();

	}
}

```









## ì¥ë‹¨ì 

### ì¥ì 

- Command Patternì€ ë‹¨ì¼ì±…ì„ì›ì¹™(Single Responsibility Principle)ì— ì¶©ì‹¤í•©ë‹ˆë‹¤. ì•ì„œ ì˜ˆì‹œë¡œ ì‚´í´ë³´ì•˜ë“¯ì´ ì–´ë– í•œ í´ë˜ìŠ¤ë¡œë¶€í„° ê¸°ëŠ¥ê³¼ ê´€ë ¨ëœ ë¶€ë¶„ë§Œì„ ë¶„ë¦¬í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

- Open/Closed ì›ì¹™ì— ì¶©ì‹¤í•©ë‹ˆë‹¤. ê¸°ì¡´ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì˜ ìˆ˜ì • ì—†ì´ ìƒˆë¡œìš´ ì»¤ë§¨ë“œë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 
  - <mark>Quiz) Open/Closed ì›ì¹™ì— ì¶©ì‹¤í•˜ì§€ ì•Šê²Œ êµ¬í˜„í•˜ë ¤ë©´, ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œìš”?</mark>
- ë‹¨ìˆœí•œ ì»¤ë§¨ë“œë“¤ì„ ì¡°í•©í•´ì„œ ë³µì¡í•œ ì»¤ë§¨ë“œë¥¼ êµ¬í˜„í•˜ëŠ” ê²ƒ ì—­ì‹œ ê°€ëŠ¥í•©ë‹ˆë‹¤.





### ë‹¨ì 

- Invokerì™€ Receiver ì‚¬ì´ì— ìƒˆë¡œìš´ ë ˆì´ì–´ë“¤(Commands)ì´ ì¶”ê°€ë˜ëŠ” ë§Œí¼ ì½”ë“œê°€ ë‹¤ì†Œ ë” ë³µì¡í•´ì§ˆ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.







